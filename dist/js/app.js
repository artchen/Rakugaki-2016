!function(e){var t=(angular.module("rakugaki",["ngAnimate","ngTouch","ui.router"]),function(e,t,n){t.otherwise("/"),n.html5Mode({enabled:!0,requireBase:!1}),e.state("welcome",{url:"/",templateUrl:"/views/welcome.html",controller:"SlideController",data:{pageTitle:"Welcome",index:0}}).state("springtide",{url:"/springtide",templateUrl:"/views/springtide.html",controller:"SlideController",data:{pageTitle:"Springtide Press",index:1}}).state("shiro",{url:"/shiro",templateUrl:"/views/shiro.html",controller:"SlideController",data:{pageTitle:"Shiro",index:2}}).state("kcalb",{url:"/theme-kcalb",templateUrl:"/views/kcalb.html",controller:"SlideController",data:{pageTitle:"Kcalb",index:3,slug:"kcalb",name:"Kcalb",wp:"",ghost:"http://themeforest.net/item/kcalb-a-minimal-responsive-ghost-theme/7191057",demo:"http://kcalb.rakugaki.me"}}).state("yabu",{url:"/theme-yabu",templateUrl:"/views/yabu.html",controller:"SlideController",data:{pageTitle:"Yabu no Naka",index:4,slug:"yabu",name:"Yabu no Naka",wp:"https://sellfy.com/p/p8CR/",ghost:"http://themeforest.net/item/yabu-no-naka-a-responsive-ghost-theme/6813025",demo:"http://yabu.rakugaki.me"}}).state("about",{url:"/about",templateUrl:"/views/about.html",controller:"SlideController",data:{pageTitle:"About",index:5}})});t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("rakugaki").config(t).run(["$rootScope","$state","$stateParams",function(e,t,n){e.$state=t,e.$stateParams=n}])}(jQuery,angular),function(e){var t=function(t,n,i,o,a,r){n.loaded=!1,n.slides=[{name:"Welcome",state:"welcome",index:0},{name:"Springtide",state:"springtide",index:1},{name:"Shiro",state:"shiro",index:2},{name:"Kcalb",state:"kcalb",index:3},{name:"Yabu no Naka",state:"yabu",index:4},{name:"About",state:"about",index:5}],n.currentSlide=0,n.numSlides=n.slides.length,n.transitionAnimation="init",n.inTransition=!1,n.modalShown=!1,n.sidebarShown=!1,n.infoWindowShown=!1,n.slideIndexShown=!1,n.safeApply=function(e,t){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():(this.$apply(e),t&&t())},n.gotoSlide=function(e,t){if(!n.modalShown&&!n.inTransition){if(o.$current.name==e)return n.closeInfoWindow(),void n.closePopup(t);n.inTransition=!0,n.closeInfoWindow(),n.closePopup(t),n.safeApply(function(){"init"!=n.transitionAnimation&&(n.transitionAnimation="init")}),i(function(){o.go(e)},320)}},n.nextSlide=function(){n.modalShown||n.inTransition||(n.inTransition=!0,n.closeInfoWindow(),n.safeApply(function(){"next"!=n.transitionAnimation&&(n.transitionAnimation="next")}),n.currentSlide===n.slides.length-1?n.currentSlide=0:n.currentSlide++,i(function(){o.go(n.slides[n.currentSlide].state)},100))},n.prevSlide=function(){n.modalShown||n.inTransition||(n.inTransition=!0,n.closeInfoWindow(),n.safeApply(function(){"prev"!=n.transitionAnimation&&(n.transitionAnimation="prev")}),0===n.currentSlide?n.currentSlide=n.slides.length-1:n.currentSlide--,i(function(){o.go(n.slides[n.currentSlide].state)},100))},n.openSidebar=function(t){t.stopPropagation(),t.preventDefault(),e(".nav-trigger").fadeOut(),e("#st-container").className="st-container",i(function(){n.sidebarShown=!0},25)},n.closePopup=function(t){t.stopPropagation(),n.sidebarShown&&(n.sidebarShown=!1,i(function(){e(".nav-trigger").fadeIn()},500)),n.slideIndexShown&&(n.slideIndexShown=!1,e(".slide-index").fadeOut())},n.prenventPropagation=function(e){e.stopPropagation()},n.openInfoWindow=function(){n.infoWindowShown=!0,e("#info-"+n.slides[n.currentSlide].state).addClass("show"),n.slideIndexShown=!1,e(".slide-index").fadeOut()},n.closeInfoWindow=function(){n.infoWindowShown=!1,e(".works-info").removeClass("show")},n.tapAnime=function(t,n){e(".plot").css("visibility","visible");var i=5;e(".plot").css("width","30px"),e(".plot").css("height","30px"),e(".plot").css("left",t-15+"px"),e(".plot").css("top",n-15+"px"),e(".plot").css({opacity:.3}),e(".plot").animate({opacity:0,height:"40px",width:"40px",left:"-="+i+"px",top:"-="+i+"px"},300,function(){e(".plot").css("visibility","hidden")})},n.initTapAnime=function(){e(".st-pusher, .trigger, .md-trigger, .md-modal").on("click",function(e){n.tapAnime(e.pageX,e.pageY)})},n.openSlideIndex=function(t){t.stopPropagation(),n.slideIndexShown=!0,e(".slide-index").fadeIn(),n.closeInfoWindow()},n.initPerfectScrollbar=function(){e(".works-info-content-wrapper, .slide-index").perfectScrollbar()},n.onKeydown=function(e){37==e.keyCode?n.prevSlide():39==e.keyCode&&n.nextSlide()},t.$on("$stateChangeSuccess",function(e,t,i){n.currentSlide=o.current.data.index}),n.$on("$includeContentLoaded",function(){n.initPerfectScrollbar()}),n.init=function(){i(function(){n.initTapAnime(),n.loaded=!0},100)},n.init()};t.$inject=["$rootScope","$scope","$timeout","$state","$stateParams","$window"],angular.module("rakugaki").controller("MainController",t)}(jQuery,angular),function(e){var t=function(t,n,i,o,a,r){n.modal={slug:"",name:"",wp:"",ghost:"",show:!1},n.iframeSource="",n.iframeSetip=!1,n.openModal=function(){n.$parent.modalShown=!0,e(".slide-nav, .info-trigger, .nav-trigger").fadeOut(),n.modal.show=!0,i(function(){n.setupIframe()},320)},n.closeModal=function(){n.$parent.modalShown=!1,n.modal.show=!1,i(function(){e(".slide-nav, .info-trigger, .nav-trigger").fadeIn()},500)},n.initKeyControl=function(){e(document).keydown(function(t){if("textarea"!==t.target.type&&"text"!==t.target.type){var n=t.keyCode||t.which;switch(n){case 27:e(".md-close").click()}}})},n.initLogoAnimations=function(){e(".bamboo").hover(function(){e(".bamboo .trigger").addClass("shake")},function(){e(".bamboo .trigger").removeClass("shake")}),e("#kcalb-logo").hover(function(){e("#kcalb .logo").addClass("bounce")},function(){e("#kcalb .logo").removeClass("bounce")}),e("#springtide-logo").hover(function(){e(this).addClass("tada")},function(){e(this).removeClass("tada")})},n.prenventPropagation=function(e){e.stopPropagation()},n.preventDefault=function(e){e.preventDefault()},n.setupIframe=function(){n.iframeSetup||(n.iframeSetup=!0,n.iframeSource=r.trustAsResourceUrl(n.modal.demo))},n.initPerfectScrollbar=function(){e(".resume-wrapper").perfectScrollbar()},n.init=function(){n.initPerfectScrollbar(),n.initLogoAnimations(),n.initKeyControl(),i(function(){n.$parent.inTransition=!1},320),i(function(){"yabu"!=o.current.name&&"kcalb"!=o.current.name||(n.modal={slug:o.current.data.slug,name:o.current.data.name,wp:o.current.data.wp,ghost:o.current.data.ghost,demo:o.current.data.demo,show:!1})},500)},n.init()};t.$inject=["$rootScope","$scope","$timeout","$state","$stateParams","$sce"],angular.module("rakugaki").controller("SlideController",t)}(jQuery,angular),function(e){var t=function(e,t,n){return function(i,o,a){var r=a.staticInclude;e.get(r,{cache:t}).success(function(e){var t=o.html(e).contents();n(t)(i)})}};t.$inject=["$http","$templateCache","$compile"];var n=function(e,t){return{link:function(n,i){var o=function(e,n,o,a,r){var l="Rakugaki";n.data&&n.data.pageTitle&&(l="Rakugaki / "+n.data.pageTitle),t(function(){i.text(l)})};e.$on("$stateChangeStart",o)}}};n.$inject=["$rootScope","$timeout"],angular.module("rakugaki").directive("staticInclude",t).directive("pageTitle",n)}(jQuery,angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL21haW4uanMiLCJjb250cm9sbGVycy9zbGlkZS5qcyIsImRpcmVjdGl2ZXMvZGlyZWN0aXZlcy5qcyJdLCJuYW1lcyI6WyIkIiwiUmFrdWdha2lDb25maWciLCJhbmd1bGFyIiwibW9kdWxlIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIm90aGVyd2lzZSIsImh0bWw1TW9kZSIsImVuYWJsZWQiLCJyZXF1aXJlQmFzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsInBhZ2VUaXRsZSIsImluZGV4Iiwic2x1ZyIsIm5hbWUiLCJ3cCIsImdob3N0IiwiZGVtbyIsIiRpbmplY3QiLCJjb25maWciLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwialF1ZXJ5IiwibWFpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkdGltZW91dCIsIiR3aW5kb3ciLCJsb2FkZWQiLCJzbGlkZXMiLCJjdXJyZW50U2xpZGUiLCJudW1TbGlkZXMiLCJsZW5ndGgiLCJ0cmFuc2l0aW9uQW5pbWF0aW9uIiwiaW5UcmFuc2l0aW9uIiwibW9kYWxTaG93biIsInNpZGViYXJTaG93biIsImluZm9XaW5kb3dTaG93biIsInNsaWRlSW5kZXhTaG93biIsInNhZmVBcHBseSIsImZuIiwiY2FsbGJhY2siLCJwaGFzZSIsInRoaXMiLCIkcm9vdCIsIiQkcGhhc2UiLCIkYXBwbHkiLCJnb3RvU2xpZGUiLCJzbGlkZSIsIiRldmVudCIsIiRjdXJyZW50IiwiY2xvc2VJbmZvV2luZG93IiwiY2xvc2VQb3B1cCIsImdvIiwibmV4dFNsaWRlIiwicHJldlNsaWRlIiwib3BlblNpZGViYXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImZhZGVPdXQiLCJjbGFzc05hbWUiLCJmYWRlSW4iLCJwcmVudmVudFByb3BhZ2F0aW9uIiwib3BlbkluZm9XaW5kb3ciLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidGFwQW5pbWUiLCJ0YXBfeHBvcyIsInRhcF95cG9zIiwiY3NzIiwib2Zmc2V0Iiwib3BhY2l0eSIsImFuaW1hdGUiLCJoZWlnaHQiLCJ3aWR0aCIsImxlZnQiLCJ0b3AiLCJpbml0VGFwQW5pbWUiLCJvbiIsInBhZ2VYIiwicGFnZVkiLCJvcGVuU2xpZGVJbmRleCIsImluaXRQZXJmZWN0U2Nyb2xsYmFyIiwicGVyZmVjdFNjcm9sbGJhciIsIm9uS2V5ZG93biIsImtleUNvZGUiLCIkb24iLCJldmVudCIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImN1cnJlbnQiLCJpbml0Iiwic2xpZGVDb250cm9sbGVyIiwiJHNjZSIsIm1vZGFsIiwic2hvdyIsImlmcmFtZVNvdXJjZSIsImlmcmFtZVNldGlwIiwib3Blbk1vZGFsIiwiJHBhcmVudCIsInNldHVwSWZyYW1lIiwiY2xvc2VNb2RhbCIsImluaXRLZXlDb250cm9sIiwiZG9jdW1lbnQiLCJrZXlkb3duIiwidGFyZ2V0IiwidHlwZSIsIndoaWNoIiwiY2xpY2siLCJpbml0TG9nb0FuaW1hdGlvbnMiLCJob3ZlciIsImV2IiwiaWZyYW1lU2V0dXAiLCJ0cnVzdEFzUmVzb3VyY2VVcmwiLCJzdGF0aWNJbmNsdWRlRGlyZWN0aXZlIiwiJGh0dHAiLCIkdGVtcGxhdGVDYWNoZSIsIiRjb21waWxlIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJ0ZW1wbGF0ZVBhdGgiLCJzdGF0aWNJbmNsdWRlIiwiZ2V0IiwiY2FjaGUiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJjb250ZW50cyIsImh0bWwiLCJwYWdlVGl0bGVEaXJlY3RpdmUiLCJsaW5rIiwibGlzdGVuZXIiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwidGl0bGUiLCJ0ZXh0IiwiZGlyZWN0aXZlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUVBLEdBTUFDLElBTkFDLFFBQUFDLE9BQUEsWUFDQSxZQUNBLFVB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QUFBRixHQUFBQyxVQUNBVixHQUFBVSxHQUFBVCxNSGloQkNKLEdBQXVCakcsU0FBVyxRQUFTLGlCQUFrQixXRzVnQjlELElBQUFnSCxHQUFBLFNBQUE3RyxFQUFBTSxHQUNBLE9BQ0F3RyxLQUFBLFNBQUFaLEVBQUFDLEdBQ0EsR0FBQVksR0FBQSxTQUFBNUMsRUFBQUMsRUFBQUMsRUFBQTJDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQSxVQUNBOUMsR0FBQS9FLE1BQUErRSxFQUFBL0UsS0FBQUMsWUFBQTRILEVBQUEsY0FBQTlDLEVBQUEvRSxLQUFBQyxXQUNBZ0IsRUFBQSxXQUNBNkYsRUFBQWdCLEtBQUFELEtBR0FsSCxHQUFBa0UsSUFBQSxvQkFBQTZDLEtIa2hCQ0YsR0FBbUJoSCxTQUFXLGFBQWMsWUc3Z0I3Q3JCLFFBQ0FDLE9BQUEsWUFDQTJJLFVBQUEsZ0JBQUF0QixHQUNBc0IsVUFBQSxZQUFBUCxJQUdBMUcsT0FBQTNCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKXtcblx0XG5cdHZhciBSYWt1Z2FraSA9IGFuZ3VsYXIubW9kdWxlKCdyYWt1Z2FraScsIFtcblx0XHQnbmdBbmltYXRlJywgXG5cdFx0J25nVG91Y2gnLCBcblx0XHQndWkucm91dGVyJ1xuXHRdKTtcblx0XG5cdHZhciBSYWt1Z2FraUNvbmZpZyA9IGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdFx0ICBcblx0ICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbiAgICBcblx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuXHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdHJlcXVpcmVCYXNlOiBmYWxzZVxuXHRcdH0pO1xuXHRcblx0XHQkc3RhdGVQcm92aWRlclxuXHRcdCAgLnN0YXRlKCd3ZWxjb21lJywge1xuXHRcdCAgICB1cmw6IFwiL1wiLFxuXHRcdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3Mvd2VsY29tZS5odG1sXCIsXG5cdFx0ICAgIGNvbnRyb2xsZXI6IFwiU2xpZGVDb250cm9sbGVyXCIsXG5cdFx0ICAgIGRhdGE6IHsgXG5cdFx0ICAgICAgcGFnZVRpdGxlOiAnV2VsY29tZScsXG5cdFx0ICAgICAgaW5kZXg6IDBcblx0XHQgICAgfVxuXHRcdCAgfSlcblx0XHQgIC5zdGF0ZSgnc3ByaW5ndGlkZScsIHtcblx0XHQgICAgdXJsOiBcIi9zcHJpbmd0aWRlXCIsXG5cdFx0ICAgIHRlbXBsYXRlVXJsOiBcIi92aWV3cy9zcHJpbmd0aWRlLmh0bWxcIixcblx0XHQgICAgY29udHJvbGxlcjogXCJTbGlkZUNvbnRyb2xsZXJcIixcblx0XHQgICAgZGF0YTogeyBcblx0XHQgICAgICBwYWdlVGl0bGU6ICdTcHJpbmd0aWRlIFByZXNzJyxcblx0XHQgICAgICBpbmRleDogMVxuXHRcdCAgICB9XG5cdFx0ICB9KVxuXHRcdCAgLnN0YXRlKCdzaGlybycsIHtcblx0XHQgICAgdXJsOiBcIi9zaGlyb1wiLFxuXHRcdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3Mvc2hpcm8uaHRtbFwiLFxuXHRcdCAgICBjb250cm9sbGVyOiBcIlNsaWRlQ29udHJvbGxlclwiLFxuXHRcdCAgICBkYXRhOiB7IFxuXHRcdCAgICAgIHBhZ2VUaXRsZTogJ1NoaXJvJyxcblx0XHQgICAgICBpbmRleDogMlxuXHRcdCAgICB9XG5cdFx0ICB9KVxuXHRcdCAgLnN0YXRlKCdrY2FsYicsIHtcblx0XHQgICAgdXJsOiBcIi90aGVtZS1rY2FsYlwiLFxuXHRcdCAgICB0ZW1wbGF0ZVVybDogXCIvdmlld3Mva2NhbGIuaHRtbFwiLFxuXHRcdCAgICBjb250cm9sbGVyOiBcIlNsaWRlQ29udHJvbGxlclwiLFxuXHRcdCAgICBkYXRhOiB7IFxuXHRcdCAgICAgIHBhZ2VUaXRsZTogJ0tjYWxiJyxcblx0XHQgICAgICBpbmRleDogMyxcblx0XHQgICAgICBzbHVnOiBcImtjYWxiXCIsXG5cdFx0ICAgICAgbmFtZTogXCJLY2FsYlwiLFxuXHRcdCAgICAgIHdwOiBcIlwiLFxuXHRcdCAgICAgIGdob3N0OiBcImh0dHA6Ly90aGVtZWZvcmVzdC5uZXQvaXRlbS9rY2FsYi1hLW1pbmltYWwtcmVzcG9uc2l2ZS1naG9zdC10aGVtZS83MTkxMDU3XCIsXG5cdFx0ICAgICAgZGVtbzogXCJodHRwOi8va2NhbGIucmFrdWdha2kubWVcIlxuXHRcdCAgICB9XG5cdFx0ICB9KVxuXHRcdCAgLnN0YXRlKCd5YWJ1Jywge1xuXHRcdCAgICB1cmw6IFwiL3RoZW1lLXlhYnVcIixcblx0XHQgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL3lhYnUuaHRtbFwiLFxuXHRcdCAgICBjb250cm9sbGVyOiBcIlNsaWRlQ29udHJvbGxlclwiLFxuXHRcdCAgICBkYXRhOiB7IFxuXHRcdCAgICAgIHBhZ2VUaXRsZTogJ1lhYnUgbm8gTmFrYScsXG5cdFx0ICAgICAgaW5kZXg6IDQsXG5cdFx0ICAgICAgc2x1ZzogXCJ5YWJ1XCIsXG5cdFx0ICAgICAgbmFtZTogXCJZYWJ1IG5vIE5ha2FcIixcblx0XHQgICAgICB3cDogXCJodHRwczovL3NlbGxmeS5jb20vcC9wOENSL1wiLFxuXHRcdCAgICAgIGdob3N0OiBcImh0dHA6Ly90aGVtZWZvcmVzdC5uZXQvaXRlbS95YWJ1LW5vLW5ha2EtYS1yZXNwb25zaXZlLWdob3N0LXRoZW1lLzY4MTMwMjVcIixcblx0XHQgICAgICBkZW1vOiBcImh0dHA6Ly95YWJ1LnJha3VnYWtpLm1lXCJcblx0XHQgICAgfVxuXHRcdCAgfSlcblx0XHQgIC5zdGF0ZSgnYWJvdXQnLCB7XG5cdFx0ICAgIHVybDogXCIvYWJvdXRcIixcblx0XHQgICAgdGVtcGxhdGVVcmw6IFwiL3ZpZXdzL2Fib3V0Lmh0bWxcIixcblx0XHQgICAgY29udHJvbGxlcjogXCJTbGlkZUNvbnRyb2xsZXJcIixcblx0XHQgICAgZGF0YTogeyBcblx0XHQgICAgICBwYWdlVGl0bGU6ICdBYm91dCcsXG5cdFx0ICAgICAgaW5kZXg6IDVcblx0XHQgICAgfVxuXHRcdCAgfSk7XG4gIH07XG5cdFxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgncmFrdWdha2knKVxuXHQgIC5jb25maWcoUmFrdWdha2lDb25maWcpXG5cdCAgLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcykge1xuXHQgICAgJHJvb3RTY29wZS4kc3RhdGUgPSAkc3RhdGU7XG5cdCAgICAkcm9vdFNjb3BlLiRzdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcblx0ICB9KTtcblx0XG59KShqUXVlcnksIGFuZ3VsYXIpOyIsIihmdW5jdGlvbigkKXtcblx0XG5cdHZhciBtYWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkd2luZG93KSB7XG5cdFx0XG5cdFx0JHNjb3BlLmxvYWRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdCRzY29wZS5zbGlkZXMgPSBbXG5cdFx0XHR7bmFtZTogJ1dlbGNvbWUnLCBzdGF0ZTogJ3dlbGNvbWUnLCBpbmRleDogMH0sXG5cdFx0XHR7bmFtZTogJ1NwcmluZ3RpZGUnLCBzdGF0ZTogJ3NwcmluZ3RpZGUnLCBpbmRleDogMX0sXG5cdFx0XHR7bmFtZTogJ1NoaXJvJywgc3RhdGU6ICdzaGlybycsIGluZGV4OiAyfSxcblx0XHRcdHtuYW1lOiAnS2NhbGInLCBzdGF0ZTogJ2tjYWxiJywgaW5kZXg6IDN9LFxuXHRcdFx0e25hbWU6ICdZYWJ1IG5vIE5ha2EnLCBzdGF0ZTogJ3lhYnUnLCBpbmRleDogNH0sXG5cdFx0XHR7bmFtZTogJ0Fib3V0Jywgc3RhdGU6ICdhYm91dCcsIGluZGV4OiA1fVxuXHRcdF07XG5cblx0XHQkc2NvcGUuY3VycmVudFNsaWRlID0gMDtcblx0XHQkc2NvcGUubnVtU2xpZGVzID0gJHNjb3BlLnNsaWRlcy5sZW5ndGg7XG5cdFx0JHNjb3BlLnRyYW5zaXRpb25BbmltYXRpb24gPSAnaW5pdCc7XG5cdFx0JHNjb3BlLmluVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHRcdCRzY29wZS5tb2RhbFNob3duID0gZmFsc2U7XG5cdFx0XG5cdFx0JHNjb3BlLnNpZGViYXJTaG93biA9IGZhbHNlO1xuXHRcdCRzY29wZS5pbmZvV2luZG93U2hvd24gPSBmYWxzZTtcblx0XHQkc2NvcGUuc2xpZGVJbmRleFNob3duID0gZmFsc2U7XG5cdFx0XG5cdFx0LyoqXG4gICAgICpcdHNhZmUgYXBwbHlcbiAgICAgKi9cbiAgICAkc2NvcGUuc2FmZUFwcGx5ID0gZnVuY3Rpb24oZm4sIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgcGhhc2UgPSB0aGlzLiRyb290LiQkcGhhc2U7XG4gICAgICBpZiAocGhhc2UgPT0gJyRhcHBseScgfHwgcGhhc2UgPT0gJyRkaWdlc3QnKSB7XG4gICAgICAgIGlmIChmbiAmJiAodHlwZW9mKGZuKSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICBmbigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiRhcHBseShmbik7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblx0XHRcblx0XHRcblx0XHQvKipcblx0XHQgKlx0ZGlyZWN0bHkgZ28gdG8gYSBzbGlkZVxuXHRcdCAqL1xuXHRcdCRzY29wZS5nb3RvU2xpZGUgPSBmdW5jdGlvbihzbGlkZSwgJGV2ZW50KSB7XG5cdFx0XHRpZiAoJHNjb3BlLm1vZGFsU2hvd24gfHwgJHNjb3BlLmluVHJhbnNpdGlvbikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoJHN0YXRlLiRjdXJyZW50Lm5hbWUgPT0gc2xpZGUpIHtcblx0XHRcdFx0JHNjb3BlLmNsb3NlSW5mb1dpbmRvdygpO1xuXHRcdFx0XHQkc2NvcGUuY2xvc2VQb3B1cCgkZXZlbnQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdCRzY29wZS5pblRyYW5zaXRpb24gPSB0cnVlO1xuXHRcdFx0JHNjb3BlLmNsb3NlSW5mb1dpbmRvdygpO1xuXHRcdFx0JHNjb3BlLmNsb3NlUG9wdXAoJGV2ZW50KTtcblx0XHRcdCRzY29wZS5zYWZlQXBwbHkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICgkc2NvcGUudHJhbnNpdGlvbkFuaW1hdGlvbiAhPSAnaW5pdCcpXG5cdFx0XHRcdFx0JHNjb3BlLnRyYW5zaXRpb25BbmltYXRpb24gPSBcImluaXRcIjtcblx0XHRcdH0pO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHN0YXRlLmdvKHNsaWRlKTtcblx0XHRcdH0sIDMyMCk7IC8vd2FpdCAzMjBtcyB0byBmaW5pc2ggc2lkZWJhciBjbG9zaW5nIGFuaW1hdGlvblxuXHRcdFx0XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0bmF2aWdhdGUgdG8gbmV4dCBzbGlkZVx0XG5cdFx0ICovXG5cdFx0JHNjb3BlLm5leHRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCRzY29wZS5tb2RhbFNob3duIHx8ICRzY29wZS5pblRyYW5zaXRpb24pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkc2NvcGUuaW5UcmFuc2l0aW9uID0gdHJ1ZTtcblx0XHRcdCRzY29wZS5jbG9zZUluZm9XaW5kb3coKTtcblx0XHRcdFxuXHRcdFx0JHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCRzY29wZS50cmFuc2l0aW9uQW5pbWF0aW9uICE9ICduZXh0Jylcblx0XHRcdFx0XHQkc2NvcGUudHJhbnNpdGlvbkFuaW1hdGlvbiA9IFwibmV4dFwiO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdGlmICgkc2NvcGUuY3VycmVudFNsaWRlID09PSAkc2NvcGUuc2xpZGVzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0JHNjb3BlLmN1cnJlbnRTbGlkZSA9IDA7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0JHNjb3BlLmN1cnJlbnRTbGlkZSsrO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCRzY29wZS5zbGlkZXNbJHNjb3BlLmN1cnJlbnRTbGlkZV0uc3RhdGUpO1xuXHRcdFx0fSwgMTAwKTsgLy9zZWVtcyAxMDBtcyBpcyBlbm91Z2ggZm9yIGFuZ3VsYXIgdG8gdXBkYXRlIHZpZXdcblx0XHRcdFxuXHRcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRuYXZpZ2F0ZSB0byBwcmV2aW91cyBzbGlkZVx0XG5cdFx0ICovXG5cdFx0JHNjb3BlLnByZXZTbGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCRzY29wZS5tb2RhbFNob3duIHx8ICRzY29wZS5pblRyYW5zaXRpb24pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkc2NvcGUuaW5UcmFuc2l0aW9uID0gdHJ1ZTtcblx0XHRcdCRzY29wZS5jbG9zZUluZm9XaW5kb3coKTtcblx0XHRcdFxuXHRcdFx0JHNjb3BlLnNhZmVBcHBseShmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCRzY29wZS50cmFuc2l0aW9uQW5pbWF0aW9uICE9ICdwcmV2Jylcblx0XHRcdFx0XHQkc2NvcGUudHJhbnNpdGlvbkFuaW1hdGlvbiA9IFwicHJldlwiO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdGlmICgkc2NvcGUuY3VycmVudFNsaWRlID09PSAwKSB7XG5cdFx0XHRcdCRzY29wZS5jdXJyZW50U2xpZGUgPSAkc2NvcGUuc2xpZGVzLmxlbmd0aCAtIDE7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0JHNjb3BlLmN1cnJlbnRTbGlkZS0tO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCRzY29wZS5zbGlkZXNbJHNjb3BlLmN1cnJlbnRTbGlkZV0uc3RhdGUpO1xuXHRcdFx0fSwgMTAwKTsgLy9zZWVtcyAxMDBtcyBpcyBlbm91Z2ggZm9yIGFuZ3VsYXIgdG8gdXBkYXRlIHZpZXdcblx0XHRcdFxuXHRcdH07XG5cdFx0XG5cblx0XHQvKipcblx0XHQgKlx0c2xpZGUgcmlnaHQgdG8gcmV2ZWFsIHNpZGViYXIgbWVudVxuXHRcdCAqL1xuXHRcdCRzY29wZS5vcGVuU2lkZWJhciA9IGZ1bmN0aW9uKCRldmVudCkge1xuXHRcdFx0JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKCcubmF2LXRyaWdnZXInKS5mYWRlT3V0KCk7XG4gICAgICAkKCcjc3QtY29udGFpbmVyJykuY2xhc3NOYW1lID0gJ3N0LWNvbnRhaW5lcic7XG5cdFx0XHRcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkc2NvcGUuc2lkZWJhclNob3duID0gdHJ1ZTtcblx0XHRcdH0sIDI1KTtcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRjbG9zZSBzaWRlYmFyIGFuZCBhbGwgcG9wdXAgd2luZG93XG5cdFx0ICovXG5cdFx0JHNjb3BlLmNsb3NlUG9wdXAgPSBmdW5jdGlvbigkZXZlbnQpIHtcblx0XHRcdCRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0aWYgKCRzY29wZS5zaWRlYmFyU2hvd24pIHtcblx0XHRcdFx0JHNjb3BlLnNpZGViYXJTaG93biA9IGZhbHNlO1xuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCQoJy5uYXYtdHJpZ2dlcicpLmZhZGVJbigpO1xuXHQgICAgICB9LCA1MDApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCRzY29wZS5zbGlkZUluZGV4U2hvd24pIHtcblx0XHRcdFx0JHNjb3BlLnNsaWRlSW5kZXhTaG93biA9IGZhbHNlO1xuXHRcdFx0XHQkKCcuc2xpZGUtaW5kZXgnKS5mYWRlT3V0KCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRwcmV2ZW50IHByb3BhZ2F0aW9uXG5cdFx0ICovXG5cdFx0JHNjb3BlLnByZW52ZW50UHJvcGFnYXRpb24gPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRvcGVuIGluZm9ybWF0aW9uIHBvcHVwIHdpbmRvd1xuXHRcdCAqL1xuXHRcdCRzY29wZS5vcGVuSW5mb1dpbmRvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JHNjb3BlLmluZm9XaW5kb3dTaG93biA9IHRydWU7XG5cdFx0XHQkKCcjaW5mby0nICsgJHNjb3BlLnNsaWRlc1skc2NvcGUuY3VycmVudFNsaWRlXS5zdGF0ZSkuYWRkQ2xhc3MoJ3Nob3cnKTtcblx0XHRcdCRzY29wZS5zbGlkZUluZGV4U2hvd24gPSBmYWxzZTtcblx0XHRcdCQoJy5zbGlkZS1pbmRleCcpLmZhZGVPdXQoKTtcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRjbG9zZSBpbmZvcm1hdGlvbiBwb3B1cCB3aW5kb3dcblx0XHQgKi9cblx0XHQkc2NvcGUuY2xvc2VJbmZvV2luZG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkc2NvcGUuaW5mb1dpbmRvd1Nob3duID0gZmFsc2U7XG5cdFx0XHQkKCcud29ya3MtaW5mbycpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0dGFwIHJpcHBsZSBhbmltYXRpb25cdFxuXHRcdCAqL1xuXHRcdCRzY29wZS50YXBBbmltZSA9IGZ1bmN0aW9uKHRhcF94cG9zLCB0YXBfeXBvcykge1xuICAgICAgJChcIi5wbG90XCIpLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XG4gICAgICB2YXIgb2Zmc2V0ID0gNTtcbiAgICAgICQoXCIucGxvdFwiKS5jc3MoJ3dpZHRoJywgMzAgKyAncHgnKTtcbiAgICAgICQoXCIucGxvdFwiKS5jc3MoJ2hlaWdodCcsIDMwICsgJ3B4Jyk7XG4gICAgICAkKFwiLnBsb3RcIikuY3NzKCdsZWZ0JywgdGFwX3hwb3MgLSAxNSArICdweCcpO1xuICAgICAgJChcIi5wbG90XCIpLmNzcygndG9wJywgdGFwX3lwb3MgLSAxNSArICdweCcpO1xuICAgICAgJChcIi5wbG90XCIpLmNzcyh7IG9wYWNpdHk6IDAuMyB9KTtcbiAgICAgICQoXCIucGxvdFwiKS5hbmltYXRlKHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgaGVpZ2h0OiA0MCArIFwicHhcIixcbiAgICAgICAgd2lkdGg6IDQwICsgXCJweFwiLFxuICAgICAgICBsZWZ0OiBcIi09XCIgKyBvZmZzZXQgKyBcInB4XCIsXG4gICAgICAgIHRvcDogXCItPVwiICsgb2Zmc2V0ICsgXCJweFwiXG4gICAgICB9LCAzMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQoXCIucGxvdFwiKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9KTtcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRpbml0aWFsaXplIHRhcCByaXBwbGUgYW5pbWF0aW9uXHRcblx0XHQgKi9cblx0XHQkc2NvcGUuaW5pdFRhcEFuaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAkKFwiLnN0LXB1c2hlciwgLnRyaWdnZXIsIC5tZC10cmlnZ2VyLCAubWQtbW9kYWxcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgJHNjb3BlLnRhcEFuaW1lKCRldmVudC5wYWdlWCwgJGV2ZW50LnBhZ2VZKTtcbiAgICAgIH0pO1xuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICpcdG9wZW4gc2xpZGUgaW5kZXggcG9wdXBcblx0XHQgKi9cblx0XHQkc2NvcGUub3BlblNsaWRlSW5kZXggPSBmdW5jdGlvbigkZXZlbnQpIHtcblx0XHRcdCRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdCRzY29wZS5zbGlkZUluZGV4U2hvd24gPSB0cnVlO1xuXHRcdFx0JCgnLnNsaWRlLWluZGV4JykuZmFkZUluKCk7XG5cdFx0XHQkc2NvcGUuY2xvc2VJbmZvV2luZG93KCk7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0aW5pdGlhbGl6ZSBwZXJmZWN0IHNjcm9sbGJhclxuXHRcdCAqL1xuXHRcdCRzY29wZS5pbml0UGVyZmVjdFNjcm9sbGJhciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JCgnLndvcmtzLWluZm8tY29udGVudC13cmFwcGVyLCAuc2xpZGUtaW5kZXgnKS5wZXJmZWN0U2Nyb2xsYmFyKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0aW5pdGlhbGl6ZSBhcnJvdyBrZXkgY29udHJvbFxuXHRcdCAqL1xuXHRcdCRzY29wZS5vbktleWRvd24gPSBmdW5jdGlvbigkZXZlbnQpIHtcblx0ICAgIGlmICgkZXZlbnQua2V5Q29kZSA9PSAzNykgeyAvL2xlZnQgYXJyb3dcblx0XHRcdCAgJHNjb3BlLnByZXZTbGlkZSgpO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAoJGV2ZW50LmtleUNvZGUgPT0gMzkpIHsgLy9yaWdodCBhcnJvd1xuXHRcdFx0ICAkc2NvcGUubmV4dFNsaWRlKCk7XG5cdCAgICB9XG5cdFx0fTtcblx0XHRcblx0XHRcblx0XHQvKipcblx0XHQgKlx0c2V0IGN1cnJlbnQgc2xpZGUgb24gc3RhdGUgY2hhbmdlIHN1Y2Nlc3Ncblx0XHQgKi9cblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcyl7XG5cdFx0XHQkc2NvcGUuY3VycmVudFNsaWRlID0gJHN0YXRlLmN1cnJlbnQuZGF0YS5pbmRleDtcblx0XHR9KTtcblx0XHRcblx0XHQvKipcblx0XHQgKiBpbml0aWFsaXplIHBlcmZlY3Qgc2Nyb2xsYmFyIHdoZW4gaW5jbHVkZSBjb250ZW50IGlzIGxvYWRlZFxuXHRcdCAqL1xuXHRcdCRzY29wZS4kb24oJyRpbmNsdWRlQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JHNjb3BlLmluaXRQZXJmZWN0U2Nyb2xsYmFyKCk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzY29wZS5pbml0VGFwQW5pbWUoKTtcblx0XHRcdFx0JHNjb3BlLmxvYWRlZCA9IHRydWU7XG5cdFx0XHR9LCAxMDApO1xuXHRcdFx0XG5cdFx0fTtcblx0XHRcblx0XHQkc2NvcGUuaW5pdCgpO1xuXHRcblx0fTtcblx0XG5cdGFuZ3VsYXIubW9kdWxlKCdyYWt1Z2FraScpLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgbWFpbkNvbnRyb2xsZXIpO1xuXHRcbn0pKGpRdWVyeSwgYW5ndWxhcik7IiwiKGZ1bmN0aW9uKCQpe1xuXHRcblx0dmFyIHNsaWRlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkc2NlKSB7XG5cdFx0XG5cdFx0JHNjb3BlLm1vZGFsID0ge1xuXHRcdFx0c2x1ZzogXCJcIixcblx0XHRcdG5hbWU6IFwiXCIsXG5cdFx0XHR3cDogXCJcIixcblx0XHRcdGdob3N0OiBcIlwiLFxuXHRcdFx0c2hvdzogZmFsc2Vcblx0XHR9O1xuXHRcdFxuXHRcdCRzY29wZS5pZnJhbWVTb3VyY2UgPSBcIlwiO1xuXHRcdCRzY29wZS5pZnJhbWVTZXRpcCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRzaG93IG1vZGFsXG5cdFx0ICovXG5cdFx0JHNjb3BlLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JHNjb3BlLiRwYXJlbnQubW9kYWxTaG93biA9IHRydWU7XG5cdFx0XHQkKFwiLnNsaWRlLW5hdiwgLmluZm8tdHJpZ2dlciwgLm5hdi10cmlnZ2VyXCIpLmZhZGVPdXQoKTtcbiAgICAgICRzY29wZS5tb2RhbC5zaG93ID0gdHJ1ZTtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAkc2NvcGUuc2V0dXBJZnJhbWUoKTtcbiAgICAgIH0sIDMyMCk7XG4gICAgICBcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRoaWRlIG1vZGFsXG5cdFx0ICovXG5cdFx0JHNjb3BlLmNsb3NlTW9kYWwgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRzY29wZS4kcGFyZW50Lm1vZGFsU2hvd24gPSBmYWxzZTtcbiAgICAgICRzY29wZS5tb2RhbC5zaG93ID0gZmFsc2U7XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgJChcIi5zbGlkZS1uYXYsIC5pbmZvLXRyaWdnZXIsIC5uYXYtdHJpZ2dlclwiKS5mYWRlSW4oKTtcbiAgICAgIH0sIDUwMCk7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0aW5pdGlhbGl6ZSBrZXlib2FyZCBpbnRlcmFjdGlvblxuXHRcdCAqL1xuXHRcdCRzY29wZS5pbml0S2V5Q29udHJvbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbihldmVudCkgeyAgXG4gICAgICAgIGlmIChldmVudC50YXJnZXQudHlwZSAhPT0gJ3RleHRhcmVhJyAmJlxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnR5cGUgIT09ICd0ZXh0J1xuICAgICAgICApIHsgXG4gICAgICAgICAgdmFyIGtleUNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xuXG4gICAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDI3OiAvLyBFU0NcbiAgICAgICAgICAgICAgJCgnLm1kLWNsb3NlJykuY2xpY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblx0XHR9O1xuXHRcdFxuXHRcdC8qKlxuXHRcdCAqXHRhbmltYXRpb24gdG8gcGxheSBvbiBzdGF0ZSBjaGFuZ2Vcblx0XHQgKi9cblx0XHQkc2NvcGUuaW5pdExvZ29BbmltYXRpb25zID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkKFwiLmJhbWJvb1wiKS5ob3ZlcihcbiAgICAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICAkKFwiLmJhbWJvbyAudHJpZ2dlclwiKS5hZGRDbGFzcyhcInNoYWtlXCIpO1xuICAgICAgICB9LGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJChcIi5iYW1ib28gLnRyaWdnZXJcIikucmVtb3ZlQ2xhc3MoXCJzaGFrZVwiKTtcbiAgICAgICAgfVxuXHQgICAgKTtcblx0ICAgIFxuXHQgICAgJChcIiNrY2FsYi1sb2dvXCIpLmhvdmVyKFxuICAgICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICQoXCIja2NhbGIgLmxvZ29cIikuYWRkQ2xhc3MoXCJib3VuY2VcIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJChcIiNrY2FsYiAubG9nb1wiKS5yZW1vdmVDbGFzcyhcImJvdW5jZVwiKTtcbiAgICAgICAgfVxuXHQgICAgKTtcblx0ICAgIFxuXHQgICAgJChcIiNzcHJpbmd0aWRlLWxvZ29cIikuaG92ZXIoXG4gICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcInRhZGFcIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcInRhZGFcIik7XG4gICAgICAgIH1cblx0ICAgICk7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKlx0cHJldmVudCBwcm9wYWdhdGlvblxuXHRcdCAqL1xuXHRcdCRzY29wZS5wcmVudmVudFByb3BhZ2F0aW9uID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICpcdHByZXZlbnQgZGVmYXVsdFxuXHRcdCAqL1xuXHRcdCRzY29wZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICpcdHNldHVwIGlmcmFtZSBzZWN1cmUgdXJsXG5cdFx0ICovXG5cdFx0JHNjb3BlLnNldHVwSWZyYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoJHNjb3BlLmlmcmFtZVNldHVwKSByZXR1cm47XG5cdFx0XHQkc2NvcGUuaWZyYW1lU2V0dXAgPSB0cnVlO1xuICAgICAgJHNjb3BlLmlmcmFtZVNvdXJjZSA9ICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKCRzY29wZS5tb2RhbC5kZW1vKTtcbiAgICB9O1xuXG5cdFx0LyoqXG5cdFx0ICpcdGluaXRpYWxpemUgcGVyZmVjdCBzY3JvbGxiYXJcblx0XHQgKi9cblx0XHQkc2NvcGUuaW5pdFBlcmZlY3RTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdCQoJy5yZXN1bWUtd3JhcHBlcicpLnBlcmZlY3RTY3JvbGxiYXIoKTtcblx0XHR9O1xuXHRcdFxuXHRcdCRzY29wZS5pbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkc2NvcGUuaW5pdFBlcmZlY3RTY3JvbGxiYXIoKTtcblx0XHRcdCRzY29wZS5pbml0TG9nb0FuaW1hdGlvbnMoKTtcblx0XHRcdCRzY29wZS5pbml0S2V5Q29udHJvbCgpO1xuXHRcdFx0XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0JHNjb3BlLiRwYXJlbnQuaW5UcmFuc2l0aW9uID0gZmFsc2U7XG5cdFx0XHR9LCAzMjApO1xuXHRcdFx0XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ3lhYnUnIHx8ICRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2tjYWxiJykge1xuXHRcdFx0XHRcdCRzY29wZS5tb2RhbCA9IHtcblx0XHRcdFx0XHRcdHNsdWc6ICRzdGF0ZS5jdXJyZW50LmRhdGEuc2x1Zyxcblx0XHRcdFx0XHRcdG5hbWU6ICRzdGF0ZS5jdXJyZW50LmRhdGEubmFtZSxcblx0XHRcdFx0XHRcdHdwOiAkc3RhdGUuY3VycmVudC5kYXRhLndwLFxuXHRcdFx0XHRcdFx0Z2hvc3Q6ICRzdGF0ZS5jdXJyZW50LmRhdGEuZ2hvc3QsXG5cdFx0XHRcdFx0XHRkZW1vOiAkc3RhdGUuY3VycmVudC5kYXRhLmRlbW8sXG5cdFx0XHRcdFx0XHRzaG93OiBmYWxzZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcblx0XHR9O1xuXHRcdFxuXHRcdCRzY29wZS5pbml0KCk7XG5cdFxuXHR9O1xuXHRcblx0YW5ndWxhci5tb2R1bGUoJ3Jha3VnYWtpJykuY29udHJvbGxlcignU2xpZGVDb250cm9sbGVyJywgc2xpZGVDb250cm9sbGVyKTtcblx0XG59KShqUXVlcnksIGFuZ3VsYXIpOyIsIihmdW5jdGlvbigkKSB7XG5cdFxuXHR2YXIgc3RhdGljSW5jbHVkZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKCRodHRwLCAkdGVtcGxhdGVDYWNoZSwgJGNvbXBpbGUpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdCAgICAgIHZhciB0ZW1wbGF0ZVBhdGggPSBhdHRycy5zdGF0aWNJbmNsdWRlO1xuXHQgICAgICAkaHR0cC5nZXQodGVtcGxhdGVQYXRoLCB7IGNhY2hlOiAkdGVtcGxhdGVDYWNoZSB9KS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICB2YXIgY29udGVudHMgPSBlbGVtZW50Lmh0bWwocmVzcG9uc2UpLmNvbnRlbnRzKCk7XG5cdCAgICAgICAgICAkY29tcGlsZShjb250ZW50cykoc2NvcGUpO1xuXHQgICAgICB9KTtcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIHBhZ2VUaXRsZURpcmVjdGl2ZSA9IGZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XG5cdFx0cmV0dXJuIHtcblx0ICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XG5cdCAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XG5cdCAgICAgICAgdmFyIHRpdGxlID0gJ1Jha3VnYWtpJztcblx0ICAgICAgICBpZiAodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5wYWdlVGl0bGUpIHRpdGxlID0gJ1Jha3VnYWtpIC8gJyArIHRvU3RhdGUuZGF0YS5wYWdlVGl0bGU7XG5cdCAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBlbGVtZW50LnRleHQodGl0bGUpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9O1xuXHQgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBsaXN0ZW5lcik7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblx0XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdyYWt1Z2FraScpXG5cdFx0LmRpcmVjdGl2ZSgnc3RhdGljSW5jbHVkZScsIHN0YXRpY0luY2x1ZGVEaXJlY3RpdmUpXG5cdFx0LmRpcmVjdGl2ZSgncGFnZVRpdGxlJywgcGFnZVRpdGxlRGlyZWN0aXZlKTtcblxuXHRcbn0pKGpRdWVyeSwgYW5ndWxhcik7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
